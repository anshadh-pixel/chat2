<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Secret Chat üí¨</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #ff9a9e, #fad0c4);
      margin: 0;
      padding: 0;
    }
    #login, #chat {
      max-width: 400px;
      margin: 60px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      display: none;
    }
    #login { display: block; }
    h2, h3 { text-align: center; color: #ff4e50; }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
    }
    button {
      background: #ff4e50;
      color: white;
      cursor: pointer;
    }
    ul {
      list-style: none;
      padding: 0;
      height: 250px;
      overflow-y: auto;
      margin-bottom: 10px;
    }
    li {
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 8px;
      max-width: 70%;
    }
    .me { background: #ffe0e0; align-self: flex-end; text-align: right; margin-left: auto; }
    .other { background: #e0f7ff; align-self: flex-start; }
    #messages { display: flex; flex-direction: column; }
  </style>
</head>
<body>

<div id="login">
  <h2>üîê Secret Couple Chat</h2>
  <label>Choose Your ID:</label>
  <select id="username">
    <option value="userA">User A</option>
    <option value="userB">User B</option>
  </select>
  <button onclick="login()">Enter Chat</button>
</div>

<div id="chat">
  <h3 id="welcome"></h3>
  <label>Send To:</label>
  <select id="userList"></select>
  <ul id="messages"></ul>
  <input id="msg" placeholder="Type a message..." />
  <button onclick="send()">Send</button>
</div>

<!-- ‚úÖ CONNECT TO YOUR LIVE SERVER -->
<script src="https://chat2-7o6i.onrender.com/socket.io/socket.io.js"></script>
<script>
  const socket = io("https://chat2-7o6i.onrender.com");
  let myUsername = '';

  function login() {
    const username = document.getElementById('username').value;
    myUsername = username;
    socket.emit('login', username);
  }

  socket.on('login_success', (users) => {
    document.getElementById('login').style.display = 'none';
    document.getElementById('chat').style.display = 'block';
    document.getElementById('welcome').innerText = Welcome, ${myUsername}!;
    const userList = document.getElementById('userList');
    userList.innerHTML = '';
    users.forEach(u => {
      if (u !== myUsername) {
        const opt = document.createElement('option');
        opt.value = u;
        opt.innerText = u;
        userList.appendChild(opt);
      }
    });
  });

  function send() {
    const to = document.getElementById('userList').value;
    const message = document.getElementById('msg').value.trim();
    if (!message || !to) return;
    socket.emit('send_private', { to, message });
    const li = document.createElement('li');
    li.className = 'me';
    li.innerText = You to ${to}: ${message};
    document.getElementById('messages').appendChild(li);
    document.getElementById('msg').value = '';
  }

  socket.on('receive_private', ({ from, message }) => {
    const li = document.createElement('li');
    li.className = 'other';
    li.innerText = ${from}: ${message};
    document.getElementById('messages').appendChild(li);
  });
</script>

</body>
</html>
